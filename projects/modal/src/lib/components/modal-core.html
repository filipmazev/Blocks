@if (config?.style?.hasBackdrop && (isSide() || isBottomSheetModalActive())) {
<modal-backdrop [isAnimated]="isAnimated" [isOpen]="isOpen()" (click)="onBackdropClick($event)">
</modal-backdrop>
}

<ng-container #modalContainer>
    @switch (true) {
        @case (isSide()) {
            <modal-side 
                [layout]="effectiveLayout()"
                [headerTemplate]="headerTemplate()"  
                [footerTemplate]="footerTemplate()" 
                [config]="config" 
                [id]="id()"
                [isOpen]="isOpen()" 
                [isAnimated]="isAnimated"
                [isBottomSheetModalActive]="isBottomSheetModalActive()" 
                [animationDuration]="animationDuration"
                [hasDefaultContentWrapperClass]="hasDefaultContentWrapperClass" 
                [hasBanner]="hasBanner" 
                (close)="close($event)">
                <ng-container [ngTemplateOutlet]="contentTemplate"></ng-container>
            </modal-side>
        } 
        @case (isCentered()) {
            <modal-centered 
                [headerTemplate]="headerTemplate()" 
                [footerTemplate]="footerTemplate()" 
                [config]="config" 
                [id]="id()"
                [isOpen]="isOpen()" 
                [isAnimated]="isAnimated"
                [isBottomSheetModalActive]="isBottomSheetModalActive()" 
                [animationDuration]="animationDuration"
                [hasDefaultContentWrapperClass]="hasDefaultContentWrapperClass" 
                [hasBanner]="hasBanner" 
                (close)="close($event)"
                (onBackdropClick)="onBackdropClick($event)">
                <ng-container [ngTemplateOutlet]="contentTemplate"></ng-container>
            </modal-centered>
        }
    }
</ng-container>

<ng-template #contentTemplate>
    <ng-container #dynamicContainer></ng-container>
</ng-template>