@if (config?.style?.hasBackdrop && (isSide() || isBottomSheetModalActive())) {
<app-modal-backdrop [isAnimated]="isAnimated()" [isOpen]="isOpen()" (click)="onBackdropClick($event)">
</app-modal-backdrop>
}

<ng-container #modalContainer>
    @switch (true) {
    @case (isSide()) {
    <app-modal-side [layout]="effectiveLayout()" [headerTemplate]="headerTemplate()" [footerTemplate]="footerTemplate()"
        [config]="config" [id]="id()" [isOpen]="isOpen()" [isAnimated]="isAnimated()"
        [isBottomSheetModalActive]="isBottomSheetModalActive()" [animationDuration]="animationDuration"
        [hasDefaultContentWrapperClass]="hasDefaultContentWrapperClass" [hasBanner]="hasBanner" (close)="close($event)">
        <ng-container [ngTemplateOutlet]="contentTemplate"></ng-container>
    </app-modal-side>
    }
    @case (isCentered()) {
    <app-modal-centered [headerTemplate]="headerTemplate()" [footerTemplate]="footerTemplate()" [config]="config"
        [id]="id()" [isOpen]="isOpen()" [isAnimated]="isAnimated()"
        [isBottomSheetModalActive]="isBottomSheetModalActive()" [animationDuration]="animationDuration"
        [hasDefaultContentWrapperClass]="hasDefaultContentWrapperClass" [hasBanner]="hasBanner" (close)="close($event)"
        (onBackdropClick)="onBackdropClick($event)">
        <ng-container [ngTemplateOutlet]="contentTemplate"></ng-container>
    </app-modal-centered>
    }
    }
</ng-container>

<ng-template #contentTemplate>
    <ng-container #dynamicContainer></ng-container>
</ng-template>